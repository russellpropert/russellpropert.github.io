<!DOCTYPE html>
<html>
<script src="https://www.google.com/jsapi"></script>
<script src="chart.js"></script>
<script src="salaries.js"></script>

<div id="chart_div" style="width: 1250; height: 1280px;"></div>

<script>
let salaries = chicago.data;
let department = 'AVIATION'

// List of departemnts
let departments = []
for (let i = 0; i < salaries.length; i++) {
		departments.push(salaries[i][10]);
}

departments = departments.filter((item, index) => {return departments.indexOf(item) === index}).sort();
console.log(departments);

// log out highest salary
console.log(salaries.sort((b, a) => a[11] - b[11]).slice(0, 1));

const generatePoints = () => {
	const points  = [];
	salaries = salaries.filter(a => {return a[10] === department;});
	salaries.forEach((item) => {
		points.push({
			job    : item[9],
			salary : Number(item[11])
		});					
	});

	// order by salary
	points.sort(compare);

	return points;
};

function compare(a, b) {
	//return a.job - b.job;
	return a.salary - b.salary;
}


window.onload = function run(){
	const points = generatePoints();
	const dataset = generateDataset(points);	
	drawChart(dataset);
};

</script>

</html>