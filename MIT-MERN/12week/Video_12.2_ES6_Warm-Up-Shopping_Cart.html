<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopping Cart</title>
</head>
<body>
  
  <script>
    // ES6 Warm Up 
    let data = {
        "fruits": [{
                "id": 1,
                "name": "Apple",
                "description": "An apple is a sweet, edible fruit produced by an apple tree. Apple trees are cultivated worldwide and are the most widely grown species in the genus Malus.",
                "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Red_Apple.jpg/265px-Red_Apple.jpg",
                "price": 35
            },
            {
                "id": 2,
                "name": "Banana",
                "description": "A banana is an edible fruit – botanically a berry – produced by several kinds of large herbaceous flowering plants in the genus Musa. In some countries, bananas used for cooking may be called plantains, distinguishing them from dessert banana",
                "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Bananas_white_background_DS.jpg/320px-Bananas_white_background_DS.jpg",
                "price": 12
            },
            {
                "id": 3,
                "name": "Grapes",
                "description": "A small bunched fruit used to make wine",
                "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/bb/Table_grapes_on_white.jpg/320px-Table_grapes_on_white.jpg",
                "weight": 0.1,
                "price": 45
            },
            {
                "id": 4,
                "name": "Pineapple",
                "description": "a large fruit that goes well with ice cream",
                "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/c/cb/Pineapple_and_cross_section.jpg/286px-Pineapple_and_cross_section.jpg",
                "price": 200
            },
            {
                "id": 5,
                "name": "Tomato",
                "description": "The tomato is the edible, often red, berry of the plant Solanum lycopersicum, commonly known as a tomato plant. The species originated in western South America and Central America.",
                "image": "https://www.kampexport.com/sites/kampexport.com/files/images/legume/image/tomates_256_1.jpg",
                "price": 150
            },
            {
                "id": 6,
                "name": "Cherry",
                "description": "A cherry is the fruit of many plants of the genus Prunus, and is a fleshy drupe. Commercial cherries are obtained from cultivars of several species, such as the sweet Prunus avium and the sour Prunus cerasus.",
                "image": "https://cdn.shopify.com/s/files/1/0610/2881/products/cherries.jpg?v=1446676415",
                "price": 120
            }
        ]
    }
    // write your own fruit object and fill in all the properties
    myfruit = {
        "id": 0,
        "name": "peach",
        "description": "The peach (Prunus persica) is a deciduous tree native to the region of Northwest China between the Tarim Basin and the north slopes of the Kunlun Mountains, where it was first domesticated and cultivated.",
        "image": "https://cdn.shopify.com/s/files/1/0610/2881/products/cherries.jpg?v=1446676415",
        "price": 40
    }
    // Add your fruit to array of fruits and make it the first one in the array
    data.fruits = [myfruit, ...data.fruits];
    const fruitArray = data.fruits;
    console.log(fruitArray);
    // I put fruits (listed by id) into my shopping cart =  [0, 3, 4, 5, 3]

    // Write a function to calculate how much I will pay at checkout
    const cart = [0, 3, 4, 5, 3];
    const getCostOf = ids => {
      const costList = [];
      ids.forEach(fruitId => {
        const fruit = fruitArray.find(({id}) => id === fruitId);
        costList.push({id: fruit.id, price: fruit.price});
      });
      return costList;
    }

    console.log(getCostOf(cart));

    const getTotal = cart => {
      let total = 0;
      cart.forEach(({price}) => total += price);
      return total;
    }

    console.log(getTotal(getCostOf(cart)));

    // Alternate costOf for a single item
    const getCostOfItem = id => (fruitArray.filter(item => item.id == id))[0].price;

    const getTotalItem = cart => {
      let total = 0;
      cart.forEach(item => total += getCostOfItem(item));
      return total;
    }

    console.log(getTotalItem(cart));

    // write a function to fill the shopping cart with random fruits
    // up to my limit of 1000
    // write out the actual cost of the food in the cart eg 980
    // hint use Math.random() to get a number between 0 and 1 then scale it to some integer

    const getRandom = scale => Math.floor(Math.random() * (scale));

    const fillCart = (cart = []) => {
      let total = 0
      while (true) {
        let fruitId = getRandom(fruitArray.length);
        let fruit = fruitArray.find(({id}) => id === fruitId);
        if (total + fruit.price <= 1000) {
          cart.push(fruit);
          total += fruit.price;
        } else {
          return cart;
        }
      }
    }

    //fillCart(cart)
    const cartTotal = cart => cart.reduce((a, b) => a + b.price, 0);
    const randomCart = fillCart();
    console.log(randomCart);
    const filteredCart = randomCart.map(a => a = {id: a.id, price: a.price});
    console.log(filteredCart);
    console.log(cartTotal(filteredCart));

</script> 
</body>
</html>