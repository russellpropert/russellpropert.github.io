(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{35:function(t,e,n){},60:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(11),i=n.n(r),s=(n(35),n(14)),o=n(7),l=n(18),u=n.n(l),d=n(27),j=n(10),b=n(28),m=n.n(b),p=n(63),O=n(69),h=n(68),f=n(67),y=n(64),g=n(65),x=n(66),I=n(1),v=[{itemID:1,name:"Apple",country:"Italy",cost:3,instock:10},{itemID:2,name:"Orange",country:"Spain",cost:4,instock:3},{itemID:3,name:"Beans",country:"USA",cost:2,instock:5},{itemID:4,name:"Cabbage",country:"USA",cost:1,instock:8}],E=5,C=0,k=!1,L=function(t,e){switch(e.type){case"RESET":return Object(o.a)(Object(o.a)({},t),{},{isLoading:!1,isError:!1,isEmptyURL:!1,data:[]});case"EMPTY_URL":return Object(o.a)(Object(o.a)({},t),{},{isLoading:!1,isError:!0,isEmptyURL:!0,data:[]});case"FETCH_INIT":return Object(o.a)(Object(o.a)({},t),{},{isLoading:!0,isEmptyURL:!1,isError:!1});case"FETCH_SUCCESS":return Object(o.a)(Object(o.a)({},t),{},{isLoading:!1,isError:!1,isEmptyURL:!1,data:e.payload});case"FETCH_FAILURE":return Object(o.a)(Object(o.a)({},t),{},{isLoading:!1,isError:!0,isEmptyURL:!1,data:[]});default:throw new Error}},R=function(t){var e=a.a.useState,n=e(v),c=Object(j.a)(n,2),r=c[0],i=c[1],l=e([]),b=Object(j.a)(l,2),R=b[0],D=b[1],S=e("http://localhost:1337/products"),U=Object(j.a)(S,2),T=U[0],F=U[1],w=function(t,e){var n=a.a.useState,c=a.a.useEffect,r=a.a.useReducer,i=n(t),s=Object(j.a)(i,2),o=s[0],l=s[1],b=r(L,{isLoading:!1,isError:!1,isEmptyURL:!1,data:e}),p=Object(j.a)(b,2),O=p[0],h=p[1];return console.log("useDataApi called"),c((function(){console.log("useEffect Called"),console.log("URL: ".concat(o));var t=!1;return"reset"!==o&&"emptyURL"!==o?function(){var e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("FETCH INIT"),h({type:"FETCH_INIT"}),e.prev=2,e.next=5,m()(o);case 5:n=e.sent,console.log("FETCH FROM URL"),t||h({type:"FETCH_SUCCESS",payload:n.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t||h({type:"FETCH_FAILURE"});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}()():"reset"===o?h({type:"RESET"}):"emptyURL"===o&&h({type:"EMPTY_URL"}),function(){t=!0}}),[o]),[O,l]}("reset",[]),H=Object(j.a)(w,2),A=H[0],B=A.data,N=A.isLoading,P=A.isError,_=A.isEmptyURL,J=H[1],M=function(t){var e=t.target.name,n=r.filter((function(t){return t.itemID===Number(e)}))[0];if(n=Object(o.a)(Object(o.a)({},n),{},{cartItemID:C}),C++,n.instock>0){D([].concat(Object(s.a)(R),[n]));var c=r.findIndex((function(t){return t.itemID===n.itemID}));r[c].instock--,i(r)}};console.log("Items: ".concat(JSON.stringify(r)));var $=r.map((function(t,e){var n;switch(t.name){case"Apple":n=1049;break;case"Orange":n=1050;break;case"Beans":n=1051;break;case"Cabbage":n=1052;break;case"Nuts":n=1053;break;case"Plum":n=1054;break;default:n=e+1055}var c="https://picsum.photos/id/"+n+"/70";return Object(I.jsxs)("li",{style:{marginBottom:"15px"},children:[Object(I.jsx)(p.a,{src:c,width:70,height:70,roundedCircle:!0,style:{margin:"4px 4px 4px 0"}}),Object(I.jsxs)(O.a,{variant:"primary",size:"large",style:{marginBottom:"4px"},name:t.itemID,onClick:M,children:[t.name,"\xa0|\xa0","Cost: $".concat(t.cost),"\xa0|\xa0","Stock: ".concat(t.instock)]}),Object(I.jsx)("br",{}),Object(I.jsx)("input",{name:t.itemID,type:"submit",onClick:M})]},t.itemID)}));console.log("Cart: ".concat(JSON.stringify(R)));var K=R.map((function(t){return Object(I.jsxs)(h.a,{style:{width:"80%"},children:[Object(I.jsxs)(h.a.Header,{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"1fr"},children:[Object(I.jsx)("div",{style:{alignSelf:"center"},children:t.name}),Object(I.jsx)(f.a.Toggle,{as:O.a,variant:"link",eventKey:t.cartItemID+1,style:{justifySelf:"end"},children:"Delete"})]}),Object(I.jsx)(f.a.Collapse,{onClick:function(){return function(t,e){var n=R.filter((function(t){return t.cartItemID!==e})),c=r.findIndex((function(e){return e.itemID===t.itemID}));r[c].instock++,i(r),D(n)}(t,t.cartItemID)},eventKey:t.cartItemID+1,children:Object(I.jsxs)(h.a.Body,{children:["Delete item \u2013 $",t.cost," from ",t.country]})})]},t.cartItemID)})),Y=function(){var t=z();return{final:R.map((function(t,e){return Object(I.jsx)("div",{index:e,children:t.name},t.cartItemID)})),total:t}},z=function(){return R.map((function(t){return t.cost})).reduce((function(t,e){return t+e}),0)};return console.log("Items to update: ".concat(k)),k&&B.length&&(k=!1,function(){console.log("Restock Products ".concat(JSON.stringify(B)));var t=B.map((function(t){var e=t.name,n=t.country,c=t.cost,a=t.instock,r=E;return E++,{itemID:r,name:e,country:n,cost:c,instock:a}}));i([].concat(Object(s.a)(r),Object(s.a)(t))),J("reset")}()),Object(I.jsxs)(y.a,{children:[Object(I.jsxs)(g.a,{children:[Object(I.jsxs)(x.a,{children:[Object(I.jsx)("h1",{children:"Product List"}),Object(I.jsx)("ul",{style:{listStyleType:"none",padding:"0"},children:$})]}),Object(I.jsxs)(x.a,{children:[Object(I.jsx)("h1",{children:"Cart Contents"}),Object(I.jsx)(f.a,{children:K})]}),Object(I.jsxs)(x.a,{children:[Object(I.jsx)("h1",{children:"CheckOut "}),Object(I.jsxs)(O.a,{children:["CheckOut $",Y().total]}),Object(I.jsxs)("div",{children:[" ",Y().total>0&&Y().final," "]})]})]}),Object(I.jsx)(g.a,{children:Object(I.jsxs)(x.a,{children:[P&&!_&&Object(I.jsx)("div",{style:{color:"red",height:"25px"},children:"Invalid URL for data source."}),P&&_&&Object(I.jsx)("div",{style:{color:"red",height:"25px"},children:"A URL must be provided."}),!P&&Object(I.jsx)("div",{style:{height:"25px"}}),Object(I.jsxs)("form",{onSubmit:function(t){J(T||"emptyURL"),k=!0,console.log("Restock called on ".concat(T)),t.preventDefault()},style:{marginBottom:"20px"},children:[Object(I.jsx)("input",{type:"text",value:T,onChange:function(t){return F(t.target.value)},style:{width:"300px",marginRight:"10px"}}),Object(I.jsx)("button",{type:"submit",children:N?"Loading...":"Restock Products"})]})]})})]})};var D=function(){return Object(I.jsx)(R,{})},S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),r(t),i(t)}))};n(59);i.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(D,{})}),document.getElementById("root")),S()}},[[60,1,2]]]);
//# sourceMappingURL=main.12aa5c82.chunk.js.map